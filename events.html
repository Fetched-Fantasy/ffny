<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="FFNY Events">
  <meta property="og:description" content="All events hosted in Fetched Fantasy goes here.">
  <meta property="og:image" content="https://raw.githubusercontent.com/Fetched-Fantasy/ffny/refs/heads/main/Copilot_20250903_093151.png">
  <meta property="og:url" content="https://fetched-fantasy.github.io/ffny/">
  <meta property="og:type" content="website">

    <link rel="icon" href="https://raw.githubusercontent.com/Fetched-Fantasy/ffny/refs/heads/main/Copilot_20250903_093151.png" type="image/x-icon">
    <title>Fetched Fantasy Events</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="parallax">
        <div class="header">
            <h1>Fetched Fantasy</h1>
            <div class="nav-container">
                <ul class="nav">
                    <li><a href="/ffny/">Home</a></li>
                    <li><a href="about">About</a></li>
                    <li><a href="">Events</a></li>
                    <li><a href="contact">Contact</a></li>
                </ul>
            </div>
        </div>
        <div class="about-me">
            <h2>Events</h2>
            <p>Check out our upcoming events!</p>
            <div id="events-container"></div>
            <!-- Add event listings here -->
        </div>
    </div>
    <script>
        async function loadEvents() {
            try {
                const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vRaV9cyGSLvvVRHdiYrTwrdfosxSA0z2SSaBaoSLnvfBNAdd5L4gijG0eXTgsz7ya0TuWgesVPQusLM/pub?output=csv');
                const csvText = await response.text();
                const events = parseCSV(csvText);
                displayEvents(events);
            } catch (error) {
                console.error('Error fetching or parsing events:', error);
                document.getElementById('events-container').innerHTML = '<p>Failed to load events.</p>';
            }
        }

        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const events = [];
            const headers = lines[0].split(',').map(header => header.trim());

            for (let i = 1; i < lines.length; i++) {
                const data = lines[i].split(',');
                if (data.length === headers.length) {
                    const event = {};
                    for (let j = 0; j < headers.length; j++) {
                        event[headers[j]] = data[j].trim();
                    }
                    events.push(event);
                }
            }
            return events;
        }

        function displayEvents(events) {
            const container = document.getElementById('events-container');
            container.innerHTML = ''; // Clear existing content

            events.forEach(event => {
                const eventDiv = document.createElement('div');
                eventDiv.classList.add('event');

                const title = document.createElement('h3');
                title.textContent = event.Title;

                const content = document.createElement('p');
                content.textContent = event.Content;












                const link = document.createElement('a');
                link.href = event.Link;
                link.textContent = 'Join!';
                //skipping the image
                if(event.ImageURL != null && event.ImageURL != "" )
                {
                    const img = document.createElement('img');
                    img.src = event.ImageURL;
                    img.alt = event.Title;
                    img.classList.add('event-image');
                    eventDiv.appendChild(img);
                }
                eventDiv.appendChild(title);
                eventDiv.appendChild(content);

                eventDiv.appendChild(link);
                container.appendChild(eventDiv);
            });
        }

        // Call loadEvents when the page loads
        window.addEventListener('load', loadEvents);
    </script>
</body>
</html>